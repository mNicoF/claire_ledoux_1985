## **
## Protège le répertoir courant avec un mot de passe
## Pour protéger un ficher ajouter les balise ou FilesMatch
## **

##<Files fichier.txt>
##AuthUserFile /exemple/.htpasswd
##AuthName "Accès réservé à l'administrateur"
##AuthType Basic
##Require valid-user
##</Files>

## **
## Personalise les erreurs
## **

##ErrorDocument 400 /400
##ErrorDocument 401 /401
##ErrorDocument 403 /403
ErrorDocument 404 /404
##ErrorDocument 500 /500
##ErrorDocument 503 /503

## **
## Défini la redirection vers l'index
## **

#DirectoryIndex index.html /errors/error_404.html

## **
## Redirige automatiquement vers www (référencement)
## Visiblement déjà implémenté parce que si je décommante sa plante à cause du /$1
## **

#RewriteEngine On
#RewriteCond %{HTTP_HOST} ^claireledoux1985.fr$
#RewriteRule ^(.*) http://www.claireledoux1985.fr/$1 [QSA,L,R=301]

## **
## Gère les redirection des autres routes
## **

RewriteEngine On
RewriteBase /
RewriteRule ^index\.html$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule . /index.html [L]


## **
## Contrôle du cache navigateur - Expire headers
## **

<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresDefault "access plus 7200 secondes"

    ExpiresByType image/jpg                     "access plus 1 week"
    ExpiresByType image/jpeg                    "access plus 1 week"
    ExpiresByType image/png                     "access plus 1 week"
    ExpiresByType image/gif                     "access plus 1 week"
    ExpiresByType image/svg+xml                 "access plus 1 week"
    AddType       image/x-icon .ico
    ExpiresByType image/ico                     "access plus 1 week"
    ExpiresByType image/icon                    "access plus 1 week"
    ExpiresByType image/x-icon                  "access plus 1 week"
    
    ExpiresByType text/css                      "access plus 1 week"
    ExpiresByType text/javascript               "access plus 1 week"
    ExpiresByType text/html                     "access plus 7200 secondes"
    
    ExpiresByType application/xhtml+xml         "access plus 7200 secondes"
    ExpiresByType application/javascript        "access plus 1 week"
    ExpiresByType application/x-javascript      "access plus 1 week"
    ExpiresByType application/x-shockwave-flash "access plus 1 week"

</IfModule>

<IfModule mod_headers.c>

    Header unset Set-Cookie

    <FilesMatch "\\.(ico|jpe?g|png|gif|swf)$">
        Header set Cache-Control "max-age=2592000, public"
    </FilesMatch>

    <FilesMatch "\\.(css)$">
        Header set Cache-Control "max-age=604800, public"
    </FilesMatch>

    <FilesMatch "\\.(js)$">
        Header set Cache-Control "max-age=216000, private"
    </FilesMatch>

    <FilesMatch "\\.(x?html?|php)$">
        Header set Cache-Control "max-age=600, private, must-revalidate"
    </FilesMatch>

</IfModule>